#!/usr/bin/env node

const app = require('../app');
const db = require('../db/models');
const http = require('http');

const { port } = require('../config');


// Get Port and store in Express
app.set('port', port);
const server = http.createServer(app);

// Create the HTTP Server
server.listen(port);

//Checking for a Database connection
db.sequelize.authenticate()
    .then(()=> {
        console.log('Database connection success!');

        //Listening for a connection
        app.listen(port, ()=> console.log(`Listening on port ${port}...`));
    })
    .catch((err) =>{
        console.log('Database connection failure..');
        console.error(err)
    });